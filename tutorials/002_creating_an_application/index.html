<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Components of a Dojo 2 application | Dojo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Components of a Dojo 2 applicationOverviewIn this tutorial, you will learn about the structure of a simple Dojo 2 application and the purpose of each part of th">
<meta property="og:type" content="website">
<meta property="og:title" content="Components of a Dojo 2 application">
<meta property="og:url" content="https://dojo.github.io/tutorials/002_creating_an_application/index.html">
<meta property="og:site_name" content="Dojo">
<meta property="og:description" content="Components of a Dojo 2 applicationOverviewIn this tutorial, you will learn about the structure of a simple Dojo 2 application and the purpose of each part of the application. This will not be a compr">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://dojo.github.io/tutorials/resources/html_js.svg">
<meta property="og:image" content="https://dojo.github.io/tutorials/resources/widget.svg">
<meta property="og:updated_time" content="2017-11-20T11:49:42.790Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Components of a Dojo 2 application">
<meta name="twitter:description" content="Components of a Dojo 2 applicationOverviewIn this tutorial, you will learn about the structure of a simple Dojo 2 application and the purpose of each part of the application. This will not be a compr">
<meta name="twitter:image" content="https://dojo.github.io/tutorials/resources/html_js.svg">
<meta name="twitter:creator" content="@https:&#x2F;&#x2F;twitter.com&#x2F;dojo">
  
    <link rel="alternate" href="/atom.xml" title="Dojo" type="application/atom+xml">
  
  
    <link rel="icon" href="/images/favicons/favicon.ico">
  
  <link rel="stylesheet" href="/css/main.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-3242977-15', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


<link rel="stylesheet" href="/css/prism-ghcolors.css" type="text/css"></head>

	<body class="body-tutorial
">
		<div class="page-wrapper">
			<header class="header">
	<div class="container">
		<nav class="navbar">
			<div class="navbar-brand">
				<a href="/" class="navbar-item"><img src="/images/logos/dojo2-logo-white.svg" class="site-logo" alt="Dojo"></a>
				<div class="navbar-burger">
					<span></span>
					<span></span>
					<span></span>
				</div>
			</div>
			<div class="navbar-menu">
				<div class="navbar-start"></div>
				<div class="navbar-end">
					<a class="navbar-item" href="/docs/fundamentals/accessibility/index.html">Docs</a>
					<a class="navbar-item" href="/tutorials">Tutorials</a>
					<a class="navbar-item" href="/blog">Blog</a>
					<a class="navbar-item" href="https://github.com/dojo/meta"><span class="icon is-medium"><i class="fa fa-github" aria-hidden="true"></i></span></a>
				</div>
			</div>
		</nav>
	</div>
</header>

			<div class="content-wrapper">
				<div class="page-content">
					<div class="section">
	<div class="container article">	
		<nav class="breadcrumb is-small hidden" aria-label="breadcrumbs">
			<ul>
				<li><a href="/tutorials">Tutorials</a></li>
				<li><a href="#">Components of a Dojo 2 application</a></li>
				<li class="is-active"><a class="step-current"></a></li>
			</ul>
		</nav>
		<section class="tutorial hidden hiding">
<h1 id="Components-of-a-Dojo-2-application"><a href="#Components-of-a-Dojo-2-application" class="headerlink" title="Components of a Dojo 2 application"></a>Components of a Dojo 2 application</h1><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>In this tutorial, you will learn about the structure of a simple Dojo 2 application and the purpose of each part of the application. This will not be a comprehensive discussion about all of the possible parts of a Dojo 2 application. We will focus on the minimum application that we started with in <a href="../001_static_content/">Your first Dojo 2 application</a>.</p>
<h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><p>You can <a href="../assets/002_creating_an_application-initial.zip">download</a> the demo project and run <code>npm install</code> to get started.</p>
<p>The <code>@dojo/cli</code> command line tool should be installed globally. Refer to the <a href="../000_local_installation/">Dojo 2 local installation</a> article for more information.</p>
<p>You also need to be familiar with TypeScript as Dojo 2 uses it extensively. For more information, refer to the <a href="../comingsoon.html">TypeScript and Dojo 2</a> article.</p>
</section><section class="tutorial hidden hiding">
<h2 id="The-main-HTML-document"><a href="#The-main-HTML-document" class="headerlink" title="The main HTML document"></a>The main HTML document</h2><p>HTML pages are the foundation for every web application and Dojo 2 applications are no different. In the sample application, the <code>index.html</code> file serves this role. Notice that the <code>&lt;body&gt;</code> tag contains a single element: <code>&lt;my-app&gt;</code>. While there is nothing special about this element, it is important that we can uniquely identify it. To find out why, look at this line in <code>main.ts</code>:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'my-app'</span><span class="token punctuation">)</span> <span class="token operator">||</span> undefined<span class="token punctuation">;</span>
</code></pre>
<p>Notice that we are searching for the <code>my-app</code> element and assigning it to the constant <code>root</code>. The application is using this node to determine where to place the Dojo 2 application on the page. Everything that the application does should be contained within this single element. There are several benefits to this approach:</p>
<ul>
<li>A Dojo 2 application can easily coexist on a page with other content.</li>
<li>That content can consist of static assets, a legacy application or even another Dojo 2 application.</li>
<li>Dojo 2 can leverage third-party libraries with ease. For example, if you would like to use the <a href="https://momentjs.com/" target="_blank" rel="noopener">moment.js</a> library to simplify working with time in your application, it can be loaded in the main HTML document, and the Dojo 2 application can take advantage of it.</li>
</ul>
</section><section class="tutorial hidden hiding">
<h2 id="The-projector"><a href="#The-projector" class="headerlink" title="The projector"></a>The projector</h2><p>In <a href="../001_static_content/">Your first Dojo 2 application</a>, we reviewed Dojo 2’s use of a virtual DOM (Document Object Model) to provide an abstraction between the application and the rendered page. The projector is the component that serves as the intermediary between these two aspects of the application and, as such, has a presence in both the application and the main HTML document. Review these lines in <code>main.ts</code>:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> Projector <span class="token operator">=</span> <span class="token function">ProjectorMixin</span><span class="token punctuation">(</span>HelloWorld<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> projector <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Projector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

projector<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<article class="aside"><strong>Why is it called a Projector?</strong><p>A physical projector takes some form of media, such as slides or video, and projects them onto a surface, such as a wall. In a similar way, Dojo 2's projector takes a virtual representation of the application and projects it onto the actual page.</p></article>
<p>These lines are the key to allowing the projector to coordinate between the virtual DOM and the rendered HTML that the user sees. The first line creates a class that registers the <code>HelloWorld</code> widget as the root widget, making it aware of the Dojo 2 application. An instance is then created and its <code>append</code> method is used to make the projector aware of the HTML document.</p>
<p>Whenever a Dojo 2 application needs to update the DOM, it informs the projector. The projector does not, however, immediately re-render the page. Instead, it registers a render request with the application via the window’s <a href="https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame" target="_blank" rel="noopener">requestAnimationFrame()</a> method. This method allows the application to delay updating the DOM until the browser is ready to re-render the page. By doing this, update operations can be grouped together which improves rendering performance. When the window re-renders the page, the application’s current virtual DOM is used to determine what updates need to be made in a single operation. This allows the application to update the virtual DOM as often as required without the risk of reducing the application’s responsiveness.</p>
</section><section class="tutorial hidden hiding">
<h2 id="Widgets"><a href="#Widgets" class="headerlink" title="Widgets"></a>Widgets</h2><p>Widgets are the basic building blocks of Dojo 2’s user interface. They combine both the visual and behavioral aspects of a component into a single element. These aspects are encapsulated within the widget’s implementation. The widget then exposes properties and methods that allow other components to interact with it. Consider the following diagrams:</p>
<p><img src="../resources/html_js.svg" title="HTML and JavaScript" class="half-width"><img src="../resources/widget.svg" title="Widget" class="half-width"></p>
<p>The first diagram shows a traditional HTML + JavaScript architecture. Since the visual (HTML) and behavioral (JavaScript) aspects of the application are publicly accessible, the application’s components can be manipulated directly which can lead to the HTML and JavaScript getting out of sync with each other. Extensive test suites are often needed to make sure that this does not happen.</p>
<p>The second image shows how widgets ensure that components only interact according to their design intent. The widget encapsulates its visual and behavioral aspects. It then exposes properties and methods that allow other components to interact with it. By providing a controlled interface, it is much easier to keep the visual and behavioral aspects of the widget synchronized.</p>
<p>In our demo application, we only have one widget, the HelloWorld widget:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> WidgetBase <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/widget-core/WidgetBase'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> v <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@dojo/widget-core/d'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token keyword">extends</span> <span class="token class-name">WidgetBase</span> <span class="token punctuation">{</span>
	<span class="token keyword">protected</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'h1'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">'I am a title!'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token string">'Biz-E-Bodies'</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>This is very simple, containing a single <code>&lt;h1&gt;</code> tag and no behavior, but it demonstrates some important concepts. Notice the <code>render</code> method, which provides the virtual nodes (also known as DNodes) for the Projector to determine what to add to the HTML document. In this example, the widget is simple enough that the function always returns the same result. We could make this widget more sophisticated by allowing it to take additional properties that can be used to alter how the DNodes are generated. We can provide sensible default values for these properties to add more complex behavior without having to change how the rest of the application interacts with it. This encourages the development of loosely coupled components that are easier to develop and maintain over time.</p>
</section><section class="tutorial hidden hiding">
<h2 id="Tests"><a href="#Tests" class="headerlink" title="Tests"></a>Tests</h2><p>The final aspect that our basic application contains is its test suite. Dojo 2 is designed to ensure that errors are either not possible or easily detected, but tests are still required to verify business logic and ensure the application’s components work together as expected. Dojo 2 leverages the <a href="http://theintern.io" target="_blank" rel="noopener">Intern</a> testing framework to provide its testing capabilities. Intern supports several testing strategies including unit, functional, performance benchmark, accessibility and visual regression testing. The tests also use the <a href="https://github.com/dojo/test-extras" target="_blank" rel="noopener">Dojo 2 test-extras library</a> to verify the output of the widget’s render function. The test-extras library is designed to facilitate testing the functionality of Dojo 2 widgets. For more information, refer to the <a href="../comingsoon.html">Testing Dojo 2 Widgets</a> article.</p>
<p>Our demo application includes some tests to verify that it is working as expected. The tests are found in <code>tests/unit/widgets/HelloWorld.ts</code>. Let’s examine this part of the test code:</p>
<pre class="language-javascript"><code class="language-javascript">	<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		helloWorldHarness<span class="token punctuation">.</span><span class="token function">expectRender</span><span class="token punctuation">(</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">'h1'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">'I am a title!'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token string">'Biz-E-Bodies'</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre>
<p>This test is ensuring that the rendering function is returning the correct tag and that the tag has the correct content. We will return to the topic of testing in a later tutorial, but for now you can use them to check your work as you progress through this series by running the following terminal command:</p>
<pre class=" language-bash"><code class="language-bash">dojo <span class="token function">test</span>
</code></pre>
</section><section class="tutorial hidden hiding">
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>This tutorial introduced the components that make up the core of every Dojo 2 application. While there are many other components that are optional, the main HTML document, projector, widgets and, hopefully, tests are present in all of them.</p>
<p>If you would like, you can download the completed <a href="../assets/002_creating_an_application-finished.zip">demo application</a> from this tutorial.</p>
<p>In <a href="../003_creating_widgets/">Creating widgets</a>, we will take a deeper look at Dojo 2 widgets. We will go beyond the static widgets that we have worked with so far and learn how to create widgets that encapsulate state and behavior.</p>
</section>

		<div class="section-one hidden"><a class="button is-primary begin-button">Begin Tutorial</a></div>
	</div>
</div>
				</div>
				<footer class="footer">
  <div class="container">
    <div class="info">
      <span class="is-size-7">&copy; JS Foundation, All Rights Reserved.</span>
    </div>
  </div>
</footer>

			</div>
			
				<div class="paginator">
	<div class="container paginator-controls">
		<nav id="paginator" class="pagination is-centered" role="navigation" aria-label="pagination">
				<a class="pagination-previous">Previous</a>
				<a class="pagination-next">Next page</a>
				<ul class="pagination-list">

				</ul>
		</nav>
	</div>
</div>


<script src="/js/tutorial-support.js"></script>
<script>
	tutorial.populatePaginator(document.getElementById('paginator'), 'Components of a Dojo 2 application');
</script>

			
		</div>
		
<!-- build:js /js/combined.js -->
<script src='/js/site.js'></script>
<!-- endbuild -->
	</body>
</html>
